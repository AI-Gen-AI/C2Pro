# ===========================================
# C2PRO - Environment Variables
# ===========================================
# Copia este archivo a .env y rellena los valores

# ===========================================
# ENVIRONMENT
# ===========================================
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=INFO

# ===========================================
# SUPABASE (Database + Auth)
# ===========================================
# Obtener de: https://supabase.com/dashboard/project/_/settings/api
SUPABASE_URL=https://tcxedmnvebazcsaridge.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRjeGVkbW52ZWJhemNzYXJpZGdlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjcwMzA3NjUsImV4cCI6MjA4MjYwNjc2NX0.jjuG6zkFBdlevTjqqvbQI4yFnNpKMz5rq8001nB639Q
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRjeGVkbW52ZWJhemNzYXJpZGdlIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2NzAzMDc2NSwiZXhwIjoyMDgyNjA2NzY1fQ.rP_YmXGj2WOVD8a2SfXnn0BZ-EtjfpwstNaSO_J-r2o

# ===========================================
# DATABASE CONNECTION
# ===========================================
# IMPORTANTE: Usar Connection Pooler (puerto 6543) en Windows y producción
# Connection Pooler (pgbouncer) - Recomendado para la mayoría de casos
# - Compatible con Windows (IPv4/IPv6)
# - Pool de conexiones gestionado
# - Mejor rendimiento bajo carga
DATABASE_URL=postgresql://postgres.tcxedmnvebazcsaridge:1TcIs1wJkKjQwn@aws-1-eu-north-1.pooler.supabase.com:6543/postgres

# Conexión Directa (puerto 5432) - Solo para casos especiales
# - Requiere más conexiones concurrentes
# - Puede tener problemas de DNS en Windows
# DATABASE_URL=postgresql://postgres.tcxedmnvebazcsaridge:1TcIs1wJkKjQwn@aws-1-eu-north-1.connect.aws.supabase.com:5432/postgres

# Para desarrollo local con Supabase CLI
# SUPABASE_URL=http://localhost:54321
# SUPABASE_ANON_KEY=eyJ...local-anon-key
# SUPABASE_SERVICE_ROLE_KEY=eyJ...local-service-key
# DATABASE_URL=postgresql://postgres:postgres@localhost:54322/postgres

# Para desarrollo local con docker-compose (PostgreSQL)
# DATABASE_URL=postgresql://postgres:postgres@localhost:5432/c2pro

# ===========================================
# REDIS (Cache)
# ===========================================
# Redis URL (Upstash o local)
# Upstash Redis - Obtener de: https://console.upstash.com/
# REDIS_URL=rediss://default:your-password@your-redis.upstash.io:6379

# Para desarrollo local
REDIS_URL=redis://localhost:6379

# ===========================================
# CLOUDFLARE R2 (Storage)
# ===========================================
# Obtener de: https://dash.cloudflare.com/ -> R2
R2_ACCOUNT_ID=your-account-id
R2_ACCESS_KEY_ID=your-access-key
R2_SECRET_ACCESS_KEY=your-secret-key
R2_BUCKET_NAME=c2pro-documents
R2_PUBLIC_URL=https://your-bucket.r2.dev

# ===========================================
# ANTHROPIC (AI)
# ===========================================
# Obtener de: https://console.anthropic.com/
ANTHROPIC_API_KEY=sk-ant-...

# Configuración de AI
AI_MODEL_DEFAULT=claude-sonnet-4-20250514
AI_MODEL_FAST=claude-haiku-4-20250514
AI_MODEL_POWERFUL=claude-opus-4-20250514
AI_MAX_TOKENS_OUTPUT=4096
AI_TIMEOUT_SECONDS=120
AI_MAX_RETRIES=3

# Budget control
AI_BUDGET_MONTHLY_DEFAULT=50.00
AI_BUDGET_WARNING_THRESHOLD=0.8

# Cache
AI_USE_CACHE=true
AI_CACHE_TTL=3600

# Testing helper (skip cost control + heavy AI dependencies)
C2PRO_TEST_LIGHT=0

# ===========================================
# SENTRY (Error Tracking)
# ===========================================
# Obtener de: https://sentry.io/
SENTRY_DSN=https://xxx@xxx.ingest.sentry.io/xxx

# ===========================================
# EMAIL (Transactional)
# ===========================================
# Resend - Obtener de: https://resend.com/
RESEND_API_KEY=re_...
EMAIL_FROM=C2Pro <noreply@c2pro.app>

# ===========================================
# FRONTEND SPECIFIC
# ===========================================
NEXT_PUBLIC_SUPABASE_URL=${SUPABASE_URL}
NEXT_PUBLIC_SUPABASE_ANON_KEY=${SUPABASE_ANON_KEY}
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_SENTRY_DSN=${SENTRY_DSN}

# ===========================================
# BACKEND SPECIFIC
# ===========================================
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=1
CORS_ORIGINS=http://localhost:3000,https://c2pro.app

# JWT Configuration (Supabase maneja esto, pero por si acaso)
JWT_SECRET_KEY=your-jwt-secret-at-least-32-chars-very-important-keep-secret
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=1440
JWT_REFRESH_TOKEN_EXPIRE_DAYS=30
BCRYPT_ROUNDS=12

# ===========================================
# FEATURE FLAGS (MVP - Fase 1)
# ===========================================
FEATURE_COHERENCE_ANALYSIS=true
FEATURE_WBS_GENERATION=true
FEATURE_BOM_GENERATION=true
FEATURE_STAKEHOLDER_EXTRACTION=true
FEATURE_RACI_GENERATION=false
FEATURE_RFQ_GENERATION=false
FEATURE_EXPEDITING_VISION=false

# ===========================================
# RATE LIMITING
# ===========================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000

# ===========================================
# FILE UPLOAD LIMITS
# ===========================================
MAX_UPLOAD_SIZE_MB=50
ALLOWED_DOCUMENT_TYPES=.pdf,.docx,.xlsx,.xls,.bc3
PDF_MAX_PAGES=500
EXCEL_MAX_ROWS=10000

# ===========================================
# STORAGE
# ===========================================
STORAGE_PROVIDER=r2
LOCAL_STORAGE_PATH=./storage
